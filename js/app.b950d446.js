(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],m=0,d=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={app:0},r=[];function s(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"05bcfd34"}[e]+".js"}function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=i);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=s(e);var l=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(m);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",l.name="ChunkLoadError",l.type=i,l.request=r,n[1](l)}a[e]=void 0}};var m=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var m=0;m<c.length;m++)t(c[m]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"446b":function(e,t,n){"use strict";n("b848")},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"db",(function(){return I}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Home")],1)},r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},["0"!=e.setting.page||e.admin.logined?e._e():n("div",{staticClass:"container-fluid h-100"},[n("div",{staticClass:"h-100 d-flex justify-content-center align-items-center flex-column"},[n("h3",{staticClass:"text-center goldText"},[e._v("18LUCK")]),n("h3",{staticClass:"mb-5 text-center goldText"},[e._v("PATRTY")]),n("h5",{staticClass:"mb-5 text-center goldText"},[e._v("報到登錄")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.adminForm.name,expression:"adminForm.name"}],attrs:{placeholder:"請輸入您的名字"},domProps:{value:e.adminForm.name},on:{input:function(t){t.target.composing||e.$set(e.adminForm,"name",t.target.value)}}}),n("div",{staticClass:"goldButton m-1 px-3",on:{click:e.signin}},[e._v("登入")])])])]),"0"!==e.setting.page&&e.admin.logined?n("div",{staticClass:"container-fluid"},[n("el-menu",{staticClass:"menu",attrs:{"default-active":e.setting.page,mode:"horizontal","background-color":"#454A60","text-color":"#fff","active-text-color":"#C7B071"},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"1",width:"25%"}},[e._v("報到登錄")]),n("el-menu-item",{attrs:{index:"3",width:"25%"}},[e._v("已報到列表")])],1),"1"==e.setting.page?n("div",{staticClass:"capturer d-flex justify-content-between align-items-stretch flex-row"},[n("div",{staticClass:"QRCODE"},[n("qrcode-stream",{attrs:{track:!1,paused:e.setting.paused},on:{decode:e.onDecode}})],1),n("div",{staticClass:"QRCODEResult d-flex align-items-center flex-column pt-5"},[n("p",[e._v(e._s(e.member.gid)+" "+e._s(e.member.name))]),n("p",{staticClass:"text-warning"},[e._v(e._s(e.member.ex))]),e.member.gid?n("div",{staticClass:"sendButton",on:{click:e.addMember}},[n("i",{staticClass:"fas fa-thumbs-up mx-2"}),e._v("確認報到者資料")]):e._e(),e.member.logined?n("div",{staticClass:"reCapture",on:{click:e.unPauseCamera}},[n("i",{staticClass:"fas fa-sync-alt mx-2"}),e._v("已報到")]):e._e()])]):e._e(),"1"==e.setting.page?n("div",{staticClass:"memberWarp"},[n("div",{staticClass:"report px-3 py-3"},[n("div",{staticClass:"logout",on:{click:e.logout}}),n("div",e._l(e.firestoreMember,(function(t){return n("div",{staticClass:"reportiItem"},[n("div",{staticClass:"row no-gutters"},[e._m(0,!0),n("div",{staticClass:"col-11"},[n("p",[n("span",{staticClass:"goldText"},[e._v(e._s(t.member.name)+" ")]),n("span",{staticClass:"grayText"},[e._v(e._s(t.member.gid)+" ")])]),n("p",[n("span",[e._v(e._s(t.member.ex)+" ")]),n("span",{staticClass:"grayText"},[e._v(e._s(t.datetime))])])])])])})),0)])]):e._e(),"3"==e.setting.page?n("div",{staticClass:"reportTotalData p-2"},[n("div",{staticClass:"w-100 p-2 text-center"},[n("button",{staticClass:"m-1",class:[""===e.selectDep?"wButton":"gButton"],on:{click:function(t){e.selectDep=""}}},[n("span",[e._v("總人數:"+e._s(e.firestoreMember.length)+" ")])]),n("button",{staticClass:"m-1",class:["ICS"===e.selectDep?"wButton":"gButton"],on:{click:function(t){e.selectDep="ICS"}}},[n("span",[e._v("ICS:"+e._s(e.icsAllMembaer)+" ")])]),n("button",{staticClass:"m-1",class:["HG"===e.selectDep?"wButton":"gButton"],on:{click:function(t){e.selectDep="HG"}}},[n("span",[e._v("HG:"+e._s(e.hgAllMembaer)+" ")])]),n("button",{staticClass:"m-1",class:["HS"===e.selectDep?"wButton":"gButton"],on:{click:function(t){e.selectDep="HS"}}},[n("span",[e._v("HS:"+e._s(e.lsAllMembaer)+" ")])]),n("button",{staticClass:"m-1",class:["HB"===e.selectDep?"wButton":"gButton"],on:{click:function(t){e.selectDep="HB"}}},[n("span",[e._v("HB:"+e._s(e.hbAllMembaer)+" ")])]),n("button",{staticClass:"m-1",class:["LS"===e.selectDep?"wButton":"gButton"],on:{click:function(t){e.selectDep="LS"}}},[n("span",[e._v("LS:"+e._s(e.lsAllMembaer)+" ")])]),n("button",{staticClass:"m-1",class:["KI"===e.selectDep?"wButton":"gButton"],on:{click:function(t){e.selectDep="KI"}}},[n("span",[e._v("KI:"+e._s(e.kiAllMembaer)+" ")])])])]):e._e(),"3"==e.setting.page?n("div",{staticClass:"reportRecord"},[n("div",{staticClass:"report p-3"},e._l(e.firestoreMemberFilter,(function(t){return n("div",{staticClass:"reportiItem"},[n("div",{staticClass:"row no-gutters"},[e._m(1,!0),n("div",{staticClass:"col-11"},[n("p",[n("span",{staticClass:"goldText"},[e._v(e._s(t.member.name)+" ")]),n("span",{staticClass:"grayText"},[e._v(e._s(t.member.gid)+" ")])]),n("p",[n("span",[e._v(e._s(t.member.ex)+" ")]),n("span",{staticClass:"grayText"},[e._v(e._s(t.datetime))]),e.admin.name==e.authority?n("span",{staticClass:"float-right",on:{click:function(n){return e.deleteMember(t.id)}}},[e._v("刪除")]):e._e()])])])])})),0)]):e._e()],1):e._e()])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-1"},[n("span",{staticClass:"grayText"},[n("i",{staticClass:"fas fa-user mt-3 mx-2"})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-1"},[n("span",{staticClass:"grayText"},[n("i",{staticClass:"fas fa-user mt-3 mx-2"})])])}],c=(n("4de4"),n("c975"),n("b0c0"),n("96cf"),n("1da1")),l={data:function(){return{authority:"18luck",clickTimes:0,selectDep:"",firestoreMember:{},adminForm:{name:""},admin:{device:"",name:"",logined:!1},member:{gid:"",name:"",ex:"",logined:!1},fireData_Member:{member:{},time:"",datetime:"",admin:{}},setting:{page:"0",capture:"",paused:!1,cameraSettings:{audio:!1,video:{facingMode:{ideal:"environment"}}}}}},firestore:function(){return{firestoreMember:I.collection("member").orderBy("time","desc")}},computed:{firestoreMemberFilter:function(){var e,t=this;return e="ICS"===this.selectDep?this.firestoreMember.filter((function(e){return e.member.gid.indexOf("ICS")>=0|e.member.gid.indexOf("XIC")>=0})):this.selectDep?this.firestoreMember.filter((function(e){return e.member.gid.indexOf(t.selectDep)>=0})):this.firestoreMember,e},icsAllMembaer:function(){var e=0;this.firestoreMember.filter((function(t,n,i){t.member.gid.indexOf("ICS")>=0|t.member.gid.indexOf("XIC")>=0&&(e+=1)}));return e},hgAllMembaer:function(){var e=0;this.firestoreMember.filter((function(t,n,i){t.member.gid.indexOf("HG")>=0&&(e+=1)}));return e},hbAllMembaer:function(){var e=0;this.firestoreMember.filter((function(t,n,i){t.member.gid.indexOf("HB")>=0&&(e+=1)}));return e},lsAllMembaer:function(){var e=0;this.firestoreMember.filter((function(t,n,i){t.member.gid.indexOf("LS")>=0&&(e+=1)}));return e},hsAllMembaer:function(){var e=0;this.firestoreMember.filter((function(t,n,i){t.member.gid.indexOf("HS")>=0&&(e+=1)}));return e},kiAllMembaer:function(){var e=0;this.firestoreMember.filter((function(t,n,i){t.member.gid.indexOf("KI")>=0&&(e+=1)}));return e}},methods:{signin:function(){this.adminForm.name&&(window.localStorage.setItem("admin",this.adminForm.name),window.localStorage.setItem("loginTime",this.getNowTime()),this.admin.name=this.adminForm.name,this.admin.time=this.getNowTime(),this.checkAdminLogined())},logout:function(){this.clickTimes>=6?(window.localStorage.removeItem("admin"),window.localStorage.removeItem("loginTime"),window.location.reload()):this.clickTimes+=1},checkAdminLogined:function(){window.localStorage.admin?(this.admin.name=window.localStorage.admin,this.admin.time=this.getNowTime(),this.admin.logined=!0,this.setting.page="1"):(this.logined=!1,this.setting.page="0"),window.localStorage.setItem("loginTime",this.getNowTime())},handleSelect:function(e,t){this.setting.page=e,this.setting.capture={},this.unPauseCamera()},onDecode:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:try{t.setting.capture=JSON.parse(e),t.setting.capture.hasOwnProperty("gid")?(t.member.gid=t.setting.capture.gid,t.member.name=t.setting.capture.name,t.member.ex=t.setting.capture.ex,i=t.firestoreMember.filter((function(e){return e.member.gid===t.member.gid})),t.check2QRcode(),i.length>0?t.member.logined=!0:t.member.logined=!1):console.log("未知的QRcode")}catch(a){t.errorQRcode="未知的QRcode"}case 1:case"end":return n.stop()}}),n)})))()},getNowTime:function(){var e=new Date,t=e.getMonth()+1;t<10&&(t="0"+t);var n=e.getDate();n<10&&(n="0"+n);var i=e.getHours();i<10&&(i="0"+i);var a=e.getMinutes();a<10&&(a="0"+a);var r=e.getSeconds();return r<10&&(r="0"+r),e.getFullYear()+"-"+t+"-"+n+" "+i+":"+a+":"+r},check2QRcode:function(){console.log("check2QRcode"),console.log(this.member.gid),this.member.gid&&this.pauseCamera()},pauseCamera:function(){this.setting.paused=!0},unPauseCamera:function(){this.fireData_Member.member=null,this.setting.capture=null,this.setting.paused=!1,this.member={gid:"",name:"",ex:"",logined:!1}},addMember:function(){var e=this;this.fireData_Member.member=this.member,this.fireData_Member.time=Date.now(),this.fireData_Member.datetime=this.getNowTime(),this.fireData_Member.admin=this.admin,I.collection("member").add(this.fireData_Member).then((function(){e.unPauseCamera()}))},deleteMember:function(e){I.collection("member").doc(e).delete()}},mounted:function(){if(this.admin.device=new MobileDetect(window.navigator.userAgent).ua,window.localStorage.loginTime){var e=new Date(window.localStorage.loginTime),t=new Date(this.getNowTime()),n=t.getTime()-e.getTime();n>864e5&&(window.localStorage.removeItem("admin"),window.localStorage.removeItem("loginTime"))}this.checkAdminLogined()}},m=l,u=(n("446b"),n("2877")),d=Object(u["a"])(m,s,o,!1,null,"52bdf014",null),f=d.exports,p={name:"app",components:{Home:f}},g=p,b=(n("5c0b"),Object(u["a"])(g,a,r,!1,null,null,null)),h=b.exports,v=(n("d3b7"),n("8c4f"));i["default"].use(v["a"]);var _=[{path:"/",name:"Home",component:f},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],w=new v["a"]({mode:"history",base:"/",routes:_}),C=w,x=n("2f62");i["default"].use(x["a"]);var M=new x["a"].Store({state:{},mutations:{},actions:{},modules:{}}),y=n("5c96"),S=n.n(y),D=n("6d12"),T=n.n(D),k=n("0ff2"),O=n("260b");n("ea7b"),n("e71f");i["default"].config.productionTip=!1,i["default"].use(T.a),i["default"].use(S.a),i["default"].use(k["a"]),O["a"].initializeApp({apiKey:"AIzaSyClxyWJX8P7ex5H53G0ymwlN0-6ycORxdw",authDomain:"party-dd1e4.firebaseapp.com",databaseURL:"https://party-dd1e4.firebaseio.com",projectId:"party-dd1e4",storageBucket:"party-dd1e4.appspot.com",messagingSenderId:"853310015177",appId:"1:853310015177:web:b484c5759d6e324049af18"});var I=O["a"].firestore();i["default"].config.ignoredElements=["qrcode-reader","QrcodeReader"],new i["default"]({router:C,store:M,render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"9c0c":function(e,t,n){},b848:function(e,t,n){}});
//# sourceMappingURL=app.b950d446.js.map